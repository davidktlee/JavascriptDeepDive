# 21장 빌트인 객체

## 21.1 자바스크립트 객체의 분류

- 자바스크립트 객체의 종류

1. `표준 빌트인 객체` : ECMAScript 사양에 정의된 객체. 애플리케이션 전역의 공통 기능을 제공하고, 자바스크립트 실행 환경(브라우저 or Node.js)과 관계없이 언제나 사용할 수 있다. 전역 객체의 프로퍼티로 제공되므로 별도의 선언 없이 전역 변수처럼 언제나 참조할 수 있다.
2. `호스트 객체` : 자바스크립트 실행 환경(브라우저 or Node.js)에서 추가로 제공하는 객체.
3. `사용자 정의 객체` : 사용자가 직접 정의한 객체

<br />

## 21.2 표준 빌트인 객체

- 자바스크립트는 Object, String, Date, Math 등 40여 개의 표준 빌트인 객체를 제공한다.

1. `생성자 함수 객체인 표준 빌트인 객체`  
   : Math, Reflect, JSON을 제외  
   : 프로토타입 메서드 + 정적 메서드 제공

예제)

```
// Number 생성자 함수에 의한 Number 객체 생성
const numObj = new Number(1.5);

// toFixed는 Number.prototype의 "프로토타입 메서드"다.
console.log(numObj.toFixed());  // 2

// isInteger는 Number의 "정적 메서드"다.
console.log(Number.isInteger(0.5));  // false
```

2. `생성자 함수 객체가 아닌 표준 빌트인 객체`  
   : Math, Reflect, JSON  
   : 정적 메서드만 제공

<br />

## 21.3 원시값과 래퍼 객체

원시값은 객체가 아니므로 프로퍼티나 메서드를 가질 수 없는데도 원시값인 문자열이 마치 객체처럼 동작한다.

```
const str = "hello";

console.log(str.length);  // 5
console.log(str.toUpperCase());  // HELLO
```

- 자바스크립트 엔진이 일시적으로 원시값을 연관된 객체로 변환해주기 때문이다.
- `래퍼 객체`(wrapper object) : 문자열, 숫자, 불리언 값에 대해 객체처럼 접근하면 생성되는 임시 객체

```
// ① 식별자 str은 문자열을 값으로 가지고 있다.
const str = "hello";

// ② 원시타입인 문자열이 래퍼객체인 String 인스턴스로 변환된다.
// String.prototype의 메서드를 상속받아 사용할 수 있다.
console.log(str.length);  // 5
console.log(str.toUpperCase());  // HELLO

// ③ str은 다시 원시값을 갖게된다.
// 래퍼 객체는 가비지 컬렉션의 대상이 된다.
console.log(typeof str);  // string
```

- 래퍼객체에 의해 마치 객체처럼 사용할 수 있으므로,
- String, Number, Boolean 생성자 함수를 new 연산자와 함께 호출하여 인스턴스를 생성할 필요가 없으며 권장하지도 않는다.
- null, undefined는 래퍼 객체를 생성하지 않는다. (에러 발생)

<br />

## 21.4 전역 객체

- `전역 객체` : 코드가 실행되기 이전 단계에서 자바스크립트 엔진에 의해 어떤 객체보다도 먼저 생성되는 특수한 객체이며, 어떤 객체에도 속하지 않은 `최상위 객체`다.
- 브라우저 환경에서는 window(또는 self, this, frames)
- Node.js 환경에서는 global이 전역 객체를 가리킨다.

- 전역 객체의 특징
  - 전역 객체를 생성할 수 있는 생성자 함수가 제공되지 않는다.
  - 전역 객체의 프로퍼티를 참조할 때 window(또는 global)을 생략할 수 있다.
  - 전역 객체는 모든 표준 빌트인 객체를 프로퍼티로 가진다.
  - 실행환경(브라우저, Node.js)에 따라 추가적으로 프로퍼티와 메서드를 갖는다.
  - `var키워드로 선언한 전역 변수`와 선언하지 않은 변수에 값을 할당한 `암묵적 전역`, 그리고 `전역 함수`는 전역 객체의 프로퍼티가 된다.
  - let, const 키워드로 선언한 전역 변수는 전역 객체의 프로퍼티가 아니다. (보이지 않는 개념적인 블록 내에 존재하게 된다-23장)
  - 브라우저 환경의 모든 자바스크립트 코드는 하나의 전역 객체 window를 공유한다.

### 1) 빌트인 전역 프로퍼티

- 전역 객체의 프로퍼티를 의미한다. 주로 애플리케이션 전역에서 사용하는 값을 제공한다.
- Infinity : 무한대를 나타내는 숫자값
- NaN : 숫자가 아님(Not-a-Number)을 나타내는 숫자값 NaN
- undefined : 원시타입 undefined를 값으로 갖는다.

### 2) 빌트인 전역 함수

- `eval()` : 문자로 표현된 자바스크립트 코드를 실행하는 함수. 취약한 보안 등 여러 문제점이 있으므로 eval 함수의 `사용은 금지`해야 한다.
- `isFinite()` : 전달받은 인수가 정상적인 `유한수인지` 검사하여 유한수이면 true, 무한수이면 false를 반환한다. 전달받은 인수의 타입이 숫자가 아닌 경우, 숫자로 타입을 변환한 후 검사를 수행한다. 이때 인수가 NaN으로 평가되는 값이라면 false를 반환한다.
- `isNaN()` : 전달받은 인수가 `NaN인지` 검사하여 불리언 타입으로 반환한다. 전달받은 인수의 타입이 숫자가 아닌 경우, 숫자로 타입을 변환한 후 검사를 수행한다.
- `parseFloat()` : 전달받은 문자열 인수를 `실수`로 해석하여 반환한다.
- `parseInt()` : 전달받은 문자열 인수를 `정수`로 해석하여 반환한다. 두번째 인수로 진법을 나타내는 기수(2~36)를 전달할 수 있다. 첫번째 인수로 전달된 문자열을 해당 기수의 숫자로 해석하여 반환한다. 반환값은 언제나 10진수다.

```
// '10' -> 2진수로 해석 -> 10진수 정수로 반환
console.log(parseInt("10", 2)); // 2
```

- 참고: 10진수 숫자를 해당 기수의 문자열로 변환 시, Number.prototype.`toString` 메서드를 사용한다.

```
x = 15;

// 15 -> 2진수로 변환, 문자열로 반환
x.toString(2); // '1111'
```

- encodeURI / decodeURI
  ![uri](uri.png)

- `encodeURI()` : 완전한 URI를 문자열로 전달받아 `이스케이프 처리`를 위해 인코딩한다.

  - 이스케이프 처리 : 어떤 시스템에서도 읽을 수 있는 아스키 문자 셋으로 변환하는 것
  - URL은 아스키 문자 셋으로만 구성되어야 한다.

- `decodeURI()` : 인코딩된 URI를 인수로 전달받아 이스케이프 처리 이전으로 디코딩한다.

```
// 완전한 URI
const uri = "http://example.com?name=이웅모&job=programmer&student";

// 이스케이프 처리를 위해 인코딩한다.
const enc = encodeURI(uri);
console.log(enc);  // http://example.com?name=%EC%9D%B4%EC%9B%85%EB%AA%A8&job=programmer&student

// 이스케이프 처리 이전으로 디코딩한다.
const dec = decodeURI(enc);
console.log(dec);  // http://example.com?name=이웅모&job=programmer&student
```

- `encodeURIComponent()` : URI 구성요소를 인수로 전달받아 인코딩한다.
  - 쿼리스트링 구분자로 사용되는 =, ?, &까지 인코딩
- `decodeURIComponent()` : 매개변수로 전달된 URI 구성요소를 디코딩한다.

### 3) 암묵적 전역

- 선언하지 않은 식별자(y)에 값을 할당하여 전역 객체에 프로퍼티를 동적 생성한다.
- 결국 y는 전역 객체의 프로퍼티가 되어 마치 전역 변수처럼 동작한다. 이러한 형상을 암묵적 전역 이라 한다.
- y는 변수가 아니다. 따라서 변수 호이스팅이 발생하지 않는다.

```
var x = 10;  // 전역 변수

function foo() {
    // 선언하지 않은 식별자에 값을 할당
    y = 20;  // window.y = 20;
}
foo();

// 선언하지 않은 식별자 y를 전역에서 참조할 수 있다.
console.log(x + y);  // 30
```
